<!doctype html>
<html lang="fr" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Planificateur</title>
  <style>
    :root{
      --bg:#0b0f14; --ink:#e8eef6; --muted:#9db0c6; --card:#121923; --line:rgba(255,255,255,.08);
      --radius:12px; --gap-1:8px; --gap-2:12px; --gap-3:16px; --bar-h:56px;
      --font: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, 'Helvetica Neue', Arial, sans-serif;
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#ffffff; --ink:#111; --muted:#6b7280; --card:#f7f7f9; --line:#e5e7eb; }
    }
    html[data-theme="light"]{ --bg:#ffffff; --ink:#111; --muted:#6b7280; --card:#f7f7f9; --line:#e5e7eb; }
    html[data-theme="dark"] { --bg:#0b0f14; --ink:#e8eef6; --muted:#9db0c6; --card:#121923; --line:rgba(255,255,255,.08) }

    *{ box-sizing:border-box }
    html,body{
      height:100%; margin:0; background:var(--bg); color:var(--ink); font-family:var(--font);
      overflow-y:auto; overflow-x:hidden; scrollbar-width:none;              /* allow scroll but hide bars */
    }
    html::-webkit-scrollbar, body::-webkit-scrollbar{ width:0; height:0 }    /* hide bars (WebKit) */

    .bar{
      height:var(--bar-h); display:flex; align-items:center; gap:10px;
      padding:10px clamp(10px, 3vw, 16px); border-bottom:1px solid var(--line);
      overflow-x:auto; white-space:nowrap; scrollbar-width:none;
      position:sticky; top:0; z-index:10; background:linear-gradient(0deg, rgba(0,0,0,0) 0%, var(--bg) 60%);
      backdrop-filter:saturate(1.1) blur(4px);
    }
    .bar::-webkit-scrollbar{ width:0; height:0 }
    .ctrl{ display:flex; align-items:center; gap:6px }
    .lbl{ font-size:12px; color:var(--muted); font-weight:700 }
    select{
      height:34px; border-radius:10px; border:1px solid var(--line);
      background:var(--bg); color:var(--ink); font-weight:700; padding:0 10px; min-width:72px;
    }
    select:focus{ outline:3px solid rgba(93,173,226,.45); outline-offset:2px }

    .content{ padding: clamp(8px, 2.5vw, 16px) }
    iframe{
      display:block; width:100%;
      height: calc(100vh - var(--bar-h) - clamp(8px, 2.5vw, 16px)*2);
      border:none; background:transparent; border-radius:var(--radius);
      scrollbar-width:none;                    /* hide iframe scrollbars (Firefox) */
    }
    iframe::-webkit-scrollbar{ display:none }  /* hide iframe scrollbars (WebKit) */

    @media print {
      .bar{ display:none !important }
      .content{ padding:0 }
      iframe{ height:auto }
    }
  </style>
</head>
<body>
  <!-- Barre compacte : Thématique / Niveau / Semaine / Séance -->
  <div class="bar" role="region" aria-label="Sélection">
    <div class="ctrl">
      <span class="lbl">Thématique</span>
      <select id="category" aria-label="Thématique">
        <option value="01_endurence de force">01_endurence de force</option>
        <option value="02_puissance et explosivité">02_puissance et explosivité</option>
        <option value="03_volume musculaire">03_volume musculaire</option>
        <option value="04_core training">04_core training</option>
      </select>
    </div>
    <div class="ctrl">
      <span class="lbl">Niveau</span>
      <select id="level" aria-label="Niveau">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
    </div>
    <div class="ctrl">
      <span class="lbl">Semaine</span>
      <select id="week" aria-label="Semaine">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
      </select>
    </div>
    <div class="ctrl">
      <span class="lbl">Séance</span>
      <select id="session" aria-label="Séance">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>
    </div>
  </div>

  <div class="content">
    <iframe id="viewer" title="Séance"></iframe>
  </div>

  <script>
    const category = document.getElementById('category');
    const level    = document.getElementById('level');
    const week     = document.getElementById('week');
    const session  = document.getElementById('session');
    const viewer   = document.getElementById('viewer');

    // Construit le chemin en tenant compte de la thématique (sous-dossier)
    function pathFor(cat,l,w,s){
      return `sessions/${cat}/N${l}_S${w}_S${s}.html`;
    }

    function load(){
      const p = pathFor(category.value, level.value, week.value, session.value);
      viewer.src = p;
    }

    category.addEventListener('change', load);
    level.addEventListener('change', load);
    week.addEventListener('change', load);
    session.addEventListener('change', load);

    // Premier chargement
    load();
  </script>
</body>
</html>
